{"mappings":"oeACA,IAAAA,EAAAC,EAAA,SCDAD,EAAAC,EAAA,SAEA,MAAMC,EAAgBC,SAASC,cAAc,mBACvCC,EAAWF,SAASC,cAAc,aAClCE,EAAgBH,SAASC,cAAc,gBAC7C,IAAIG,EAAS,IAAI,EAAAP,EAAAQ,SASV,SAASC,IACdJ,EAASK,UAAUC,IAAI,aACvBL,EAAcM,oBAAoB,QAASH,GAC3CJ,EAASO,oBAAoB,QAASC,GACtCC,OAAOF,oBAAoB,UAAWG,E,CAGxC,SAASF,EAAgBG,GACnBA,EAAEC,SAAWD,EAAEE,eACjBT,G,CAIJ,SAASM,EAAWC,GACH,WAAXA,EAAEG,MACJV,G,CAIG,SAASW,EAAoBC,GAClC,MAAMC,EAAUC,OAAOD,QAAQD,GACzBG,EAAc,GACpBF,EAAQG,KAAIC,IACNA,EAAK,GAAGC,SAAS,kBAAoBD,EAAK,IAC5CF,EAAYI,KAAKF,EAAK,GAAG,IAG7BG,QAAQC,IAAIN,GACZ,MAAMO,EAAmBP,EACtBC,KACCO,GACE,gGAEUA,6BAIbC,KAAK,KAEFC,SAAEA,EAAQC,cAAEA,EAAaC,QAAEA,EAAOC,gBAAEA,GAAoBhB,EACxDiB,EAAS,wEACwBJ,kKAGKG,sEAENF,uRAMlBJ,qIAIwCK,qDAG5DlC,EAAcqC,UAAYD,EAI5B,WACE,MAAME,EAAmBrC,SAASC,cAAc,eAChDyB,QAAQC,IAAIvB,EAAOkC,OACnBD,EAAiBE,iBAAiB,SAAS1B,IACzCa,QAAQC,IAAId,EAAEC,OAAO0B,QAAQC,IAKjC,SAAuBA,EAAK,IAC1B,IAAIC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQjD,EAAAkD,gBAAkB,GAG7D7B,EACFwB,EAASM,MAAKzB,GAAQA,EAAKU,UAAYQ,KACvCrC,EAAOkC,MAAMU,MAAKzB,GAAQA,EAAKU,UAAYQ,IAC7Cf,QAAQC,IAAIT,GACPA,EAGHwB,EAAWA,EAASO,QAAO1B,GAAQA,EAAKU,UAAYQ,IAFpDC,EAASjB,KAAKP,GAIhB2B,aAAaK,QAAQrD,EAAAkD,aAAcJ,KAAKQ,UAAUT,G,CAjBhDU,CAAcvC,EAAEC,OAAO0B,QAAQC,GAAG,G,CARpCY,E,CDvEF,MAAMC,EAAUtD,SAASC,cAAc,YACTD,SAASC,cACrC,8BAWK,SAASsD,EAAgBC,GAC9B,IAAIC,EAAoBd,KAAKC,MAAMC,aAAaC,QAAQjD,EAAAkD,gBAAkB,GAG1E,GAAIF,aAAaC,QAAQjD,EAAAkD,eAAiBU,EAAkBC,OAAS,EAAG,CACtE,MAAMC,EAAkBF,EACrBnC,KAAI,EAACS,SAAEA,EAAQC,cAAEA,EAAaC,QAAEA,EAAO2B,cAAEA,KAEjC,kFACoC5B,WAAuBD,0DAC5BA,+KAG+BE,sMAIFA,mIAMpEH,KAAK,IACR0B,EAAQpB,UAAYuB,EAED3D,SAAS6D,iBAAiB,gBAClCC,SAAQC,IAEjBA,EAAKxB,iBAAiB,SAAS1B,IAK7BI,EAJewC,EAAkBT,MAC/BzB,GAAQA,EAAKU,UAAYpB,EAAEC,OAAO0B,QAAQC,MCvClDvC,EAASK,UAAUyD,OAAO,aAC1B7D,EAAcoC,iBAAiB,QAASjC,GACxCJ,EAASqC,iBAAiB,QAAS7B,GACnCC,OAAO4B,iBAAiB,UAAW3B,EDwCV,GACnB,IAEiBZ,SAAS6D,iBAAiB,kBAClCC,SAAQvC,IAEnBA,EAAKgB,iBAAiB,QAAS0B,EAAmB,G,KAE/C,CACL,MAAMN,EAAkB,uIAMxBH,EAAQpB,UAAYuB,C,EAIxB,MAAMM,EAAqBpD,IACzB,IAAI4C,EAAoBd,KAAKC,MAAMC,aAAaC,QAAQjD,EAAAkD,eACxDU,EAAoBA,EAAkBR,QACpC1B,GAAQA,EAAKU,UAAYpB,EAAEC,OAAO0B,QAAQC,KAE5Cf,QAAQC,IAAI8B,GACZZ,aAAaK,QAAQrD,EAAAkD,aAAcJ,KAAKQ,UAAUM,IAClDF,EAAgBD,EAAQ,EAE1BC,EAAgBD","sources":["src/js/favoritecocktails.js","src/js/modalcocktail.js"],"sourcesContent":["// import ApiService from './apiservice';\nimport Render, { FAVORITE_KEY } from './render';\nimport { openModalCocktail, renderModalCocktail } from './modalcocktail';\nconst gallery = document.querySelector('.gallery');\nconst galleryCocktailsTitle = document.querySelector(\n  '.favorite-cocktails__title'\n);\n// const buttonMore = document.querySelector('.button-more');\n// let apiService = new ApiService();\n// let render = new Render();\n\n// apiService.getCocktailRandom(3).then(data => {\n//   localStorage.setItem(FAVORITE_KEY, JSON.stringify(data));\n//   showAllCoctails(gallery); // удалить до пуша\n// });\n\nexport function showAllCoctails(gallery) {\n  let favoriteCocktails = JSON.parse(localStorage.getItem(FAVORITE_KEY)) || [];\n  // console.log(favoriteCocktails);\n\n  if (localStorage.getItem(FAVORITE_KEY) && favoriteCocktails.length > 0) {\n    const markupCocktails = favoriteCocktails\n      .map(({ strDrink, strDrinkThumb, idDrink, strIngredient }) => {\n        // console.log(strIngredient);\n        return `<li class=\"cocktails__item\">\n                <img class=\"cocktails__img\" src=\"${strDrinkThumb}\" alt=\"${strDrink} photo\">\n                <h3 class=\"cocktails__name\">${strDrink}</h3>\n                <ul class=\"button-list\">\n                    <li class=\"button__item\">\n                        <button class=\"button-more\" type=\"button\" data-id=\"${idDrink}\">Learn more\n                        </button>\n                    </li>\n                  <li class=\"button__item\">\n                    <button class='button-remove' type=\"button\" data-id=\"${idDrink}\" data-action=\"favorite\">Remove</button>\n                  </li>\n                </ul>\n              </li>\n              `;\n      })\n      .join('');\n    gallery.innerHTML = markupCocktails;\n\n    const buttonMore = document.querySelectorAll('.button-more');\n    buttonMore.forEach(elem => {\n      // console.log(elem);\n      elem.addEventListener('click', e => {\n        let cocktail = favoriteCocktails.find(\n          elem => elem.idDrink === e.target.dataset.id\n        );\n        // console.log(cocktail);\n        renderModalCocktail(cocktail);\n        openModalCocktail();\n      });\n    });\n    const buttonRemove = document.querySelectorAll('.button-remove');\n    buttonRemove.forEach(elem => {\n      // console.log(elem);\n      elem.addEventListener('click', removeFromFavorite);\n    });\n  } else {\n    const markupCocktails = `<li>\n    <p class=\"no__favorite-cocktails\">\n      You haven't added any <br />\n      favorite cocktails yet\n    </p>\n    </li>`;\n    gallery.innerHTML = markupCocktails;\n  }\n}\n\nconst removeFromFavorite = e => {\n  let favoriteCocktails = JSON.parse(localStorage.getItem(FAVORITE_KEY));\n  favoriteCocktails = favoriteCocktails.filter(\n    elem => elem.idDrink !== e.target.dataset.id\n  );\n  console.log(favoriteCocktails);\n  localStorage.setItem(FAVORITE_KEY, JSON.stringify(favoriteCocktails));\n  showAllCoctails(gallery);\n};\nshowAllCoctails(gallery);\n","import Render, { FAVORITE_KEY } from './render';\n\nconst modalCocktail = document.querySelector('.modal-cocktail');\nconst backdrop = document.querySelector('.backdrop');\nconst btnModalClose = document.querySelector('.modal-close');\nlet render = new Render();\n\nexport function openModalCocktail() {\n  backdrop.classList.remove('is-hidden');\n  btnModalClose.addEventListener('click', closeModalCocktail);\n  backdrop.addEventListener('click', onBackDropClick);\n  window.addEventListener('keydown', onEscClick);\n}\n\nexport function closeModalCocktail() {\n  backdrop.classList.add('is-hidden');\n  btnModalClose.removeEventListener('click', closeModalCocktail);\n  backdrop.removeEventListener('click', onBackDropClick);\n  window.removeEventListener('keydown', onEscClick);\n}\n\nfunction onBackDropClick(e) {\n  if (e.target === e.currentTarget) {\n    closeModalCocktail();\n  }\n}\n\nfunction onEscClick(e) {\n  if (e.code === 'Escape') {\n    closeModalCocktail();\n  }\n}\n\nexport function renderModalCocktail(cocktail) {\n  const entries = Object.entries(cocktail);\n  const ingridients = [];\n  entries.map(elem => {\n    if (elem[0].includes('strIngredient') && elem[1]) {\n      ingridients.push(elem[1]);\n    }\n  });\n  console.log(ingridients);\n  const ingidientsMarkup = ingridients\n    .map(\n      ingridient =>\n        `<li class=\"ingredients__item\">\n      <a href=\"\" class=\"ingredients__link\">\n        &#10038 ${ingridient}\n      </a>\n    </li>`\n    )\n    .join('');\n\n  const { strDrink, strDrinkThumb, idDrink, strInstructions } = cocktail;\n  const markup = `<div class=\"cocktails-info\">\n              <h2 class=\"modal__title\">${strDrink}</h2>\n              <div class=\"instruction\">\n              <h3 class=\"instractions__title\">Instructions:</h3>\n              <p class=\"instractions__text\">${strInstructions}</p>\n              </div>\n              <img class=\"photo\" src=\"${strDrinkThumb}\" alt=\"#\">\n              \n              <div class=\"ingredients\">\n                  <h3 class=\"ingredients__title\">Ingredients</h3>\n                  <p class=\"ingredients__subtitle\">Per cocktail</p>\n                  <ul class=\"ingredients__list\">\n                    ${ingidientsMarkup}  \n                  </ul>\n              </div>\n          </div>\n          <button class='btn-remove' type=\"button\" data-id=\"${idDrink}\">Remove from favorite</button>\n                `;\n\n  modalCocktail.innerHTML = markup;\n  updateButton();\n}\n\nfunction updateButton() {\n  const btnModalCocktail = document.querySelector('.btn-remove');\n  console.log(render.cards);\n  btnModalCocktail.addEventListener('click', e => {\n    console.log(e.target.dataset.id);\n    addToFavorite(e.target.dataset.id);\n  });\n}\n\nfunction addToFavorite(id = '') {\n  let favorite = JSON.parse(localStorage.getItem(FAVORITE_KEY)) || [];\n  //   let favorite = dataLocalStorage ? JSON.parse(dataLocalStorage) : [];\n  // const card = this.cards.find(elem => elem.idDrink === id);\n  let cocktail =\n    favorite.find(elem => elem.idDrink === id) ||\n    render.cards.find(elem => elem.idDrink === id);\n  console.log(cocktail);\n  if (!cocktail) {\n    favorite.push(cocktail);\n  } else {\n    favorite = favorite.filter(elem => elem.idDrink !== id);\n  }\n  localStorage.setItem(FAVORITE_KEY, JSON.stringify(favorite));\n}\n"],"names":["$1dkLo","parcelRequire","$226b3d7c90596b9f$var$modalCocktail","document","querySelector","$226b3d7c90596b9f$var$backdrop","$226b3d7c90596b9f$var$btnModalClose","$226b3d7c90596b9f$var$render","default","$226b3d7c90596b9f$export$2409b4e58221c4d1","classList","add","removeEventListener","$226b3d7c90596b9f$var$onBackDropClick","window","$226b3d7c90596b9f$var$onEscClick","e","target","currentTarget","code","$226b3d7c90596b9f$export$f67d69d0515e6396","cocktail","entries","Object","ingridients","map","elem","includes","push","console","log","ingidientsMarkup","ingridient","join","strDrink","strDrinkThumb","idDrink","strInstructions","markup","innerHTML","btnModalCocktail","cards","addEventListener","dataset","id","favorite","JSON","parse","localStorage","getItem","FAVORITE_KEY","find","filter","setItem","stringify","$226b3d7c90596b9f$var$addToFavorite","$226b3d7c90596b9f$var$updateButton","$51c9c420843a166b$var$gallery","$51c9c420843a166b$export$1fe49417ecbe7237","gallery1","favoriteCocktails","length","markupCocktails","strIngredient","querySelectorAll","forEach","elem1","remove","$51c9c420843a166b$var$removeFromFavorite"],"version":3,"file":"favorite-cocktails.f5ce60e1.js.map"}